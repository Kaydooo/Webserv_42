/* Player Sound Cloud */
!function(){var t=/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent);window.soundcloud={version:"0.1",debug:!1,_listeners:[],_redispatch:function(n,t,a){var e,i=this._listeners[n]||[],s="soundcloud:"+n;try{e=this.getPlayer(t)}catch(e){return void(this.debug&&window.console&&console.error("unable to dispatch widget event "+n+" for the widget id "+t,a,e))}window.jQuery?jQuery(e).trigger(s,[a]):window.Prototype&&$(e).fire(s,a);for(var o=0,r=i.length;o<r;o+=1)i[o].apply(e,[e,a]);this.debug&&window.console&&console.log(s,n,t,a)},addEventListener:function(e,n){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(n)},removeEventListener:function(e,n){for(var t=this._listeners[e]||[],a=0,i=t.length;a<i;a+=1)t[a]===n&&t.splice(a,1)},getPlayer:function(e){var n;try{if(!e)throw"The SoundCloud Widget DOM object needs an id atribute, please refer to SoundCloud Widget API documentation.";if(n=t?window[e]:document[e]){if(n.api_getFlashId)return n;throw"The SoundCloud Widget External Interface is not accessible. Check that allowscriptaccess is set to 'always' in embed code"}throw"The SoundCloud Widget with an id "+e+" couldn't be found"}catch(e){throw console&&console.error&&console.error(e),e}},onPlayerReady:function(e,n){this._redispatch("onPlayerReady",e,n)},onMediaStart:function(e,n){this._redispatch("onMediaStart",e,n)},onMediaEnd:function(e,n){this._redispatch("onMediaEnd",e,n)},onMediaPlay:function(e,n){this._redispatch("onMediaPlay",e,n)},onMediaPause:function(e,n){this._redispatch("onMediaPause",e,n)},onMediaBuffering:function(e,n){this._redispatch("onMediaBuffering",e,n)},onMediaSeek:function(e,n){this._redispatch("onMediaSeek",e,n)},onMediaDoneBuffering:function(e,n){this._redispatch("onMediaDoneBuffering",e,n)},onPlayerError:function(e,n){this._redispatch("onPlayerError",e,n)}}}(),function(d){var a,i,t,e,s,n,o,r,c,u,l,p,f=function(e){var n,t=(n=e,{h:Math.floor(n/36e5),m:Math.floor(n/6e4%60),s:Math.floor(n/1e3%60)}),a=[];return 0<t.h&&a.push(t.h),a.push(t.m<10&&0<t.h?"0"+t.m:t.m),a.push(t.s<10?"0"+t.s:t.s),a.join(".")},h=d(document),y=function(e){try{window.console&&window.console.log&&window.console.log.apply(window.console,arguments)}catch(e){}},g="soundcloud.com",v="https:"===document.location.protocol,m=(e=function(){var e=!1;try{var n=new Audio;e=n.canPlayType&&/maybe|probably/.test(n.canPlayType("audio/mpeg"))}catch(e){}return e}(),s=function(){h.trigger("scPlayer:onAudioReady")},n=function(){h.trigger("scPlayer:onMediaPlay")},o=function(){h.trigger("scPlayer:onMediaPause")},r=function(){h.trigger("scPlayer:onMediaEnd")},c=function(e){h.trigger({type:"scPlayer:onMediaBuffering",percent:e})},e?(t=new Audio,d('<div class="sc-player-engine-container"></div>').appendTo(document.body).append(t),t.addEventListener("play",n,!1),t.addEventListener("pause",o,!1),t.addEventListener("timeupdate",function(e){var n=e.target,t=(n.buffered.length&&n.buffered.end(0))/n.duration*100;c(t),n.currentTime===n.duration&&r()},!1),t.addEventListener("progress",function(e){var n=e.target,t=(n.buffered.length&&n.buffered.end(0))/n.duration*100;c(t)},!1),{load:function(e,n){t.pause(),t.src=e.stream_url+(/\?/.test(e.stream_url)?"&":"?")+"consumer_key="+n,t.load(),t.play()},play:function(){t.play()},pause:function(){t.pause()},stop:function(){t.currentTime&&(t.currentTime=0,t.pause())},seek:function(e){t.currentTime=t.duration*e,t.play()},getDuration:function(){return 1e3*t.duration},getPosition:function(){return 1e3*t.currentTime},setVolume:function(e){t.volume=e/100}}):(i="scPlayerEngine",soundcloud.addEventListener("onPlayerReady",function(e,n){a=soundcloud.getPlayer(i),s()}),soundcloud.addEventListener("onMediaEnd",r),soundcloud.addEventListener("onMediaBuffering",function(e,n){c(n.percent)}),soundcloud.addEventListener("onMediaPlay",n),soundcloud.addEventListener("onMediaPause",o),{load:function(e){var n,t=e.uri;a?a.api_load(t):d('<div class="sc-player-engine-container"></div>').appendTo(document.body).html((n=(v?"https":"http")+"://player."+g+"/player.swf?url="+t+"&amp;enable_api=true&amp;player_type=engine&amp;object_id="+i,d.browser.msie?'<object height="100%" width="100%" id="'+i+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" data="'+n+'"><param name="movie" value="'+n+'" /><param name="allowscriptaccess" value="always" /></object>':'<object height="100%" width="100%" id="'+i+'"><embed allowscriptaccess="always" height="100%" width="100%" src="'+n+'" type="application/x-shockwave-flash" name="'+i+'" /></object>'))},play:function(){a&&a.api_play()},pause:function(){a&&a.api_pause()},stop:function(){a&&a.api_stop()},seek:function(e){a&&a.api_seekTo(a.api_getTrackDuration()*e)},getDuration:function(){return a&&a.api_getTrackDuration&&1e3*a.api_getTrackDuration()},getPosition:function(){return a&&a.api_getTrackPosition&&1e3*a.api_getTrackPosition()},setVolume:function(e){a&&a.api_setVolume&&a.api_setVolume(e)}})),k=!1,P=[],w={},b=function(e,o,n){var r=0,c={node:e,tracks:[]},l=function(n){var e,t,a,i,s=(e=n.url,t=u,a=(v||/^https/i.test(e)?"https":"http")+"://api."+g+"/resolve?url=",i="format=json&consumer_key="+t+"&callback=?",v&&(e=e.replace(/^http:/,"https:")),/api\./.test(e)?e+"?"+i:a+e+"&"+i);d.getJSON(s,function(e){r+=1,e.tracks?c.tracks=c.tracks.concat(e.tracks):e.duration?(e.permalink_url=n.url,c.tracks.push(e)):e.creator?o.push({url:e.uri+"/tracks"}):e.username?/favorites/.test(n.url)?o.push({url:e.uri+"/favorites"}):o.push({url:e.uri+"/tracks"}):d.isArray(e)&&(c.tracks=c.tracks.concat(e)),o[r]?l(o[r]):c.node.trigger({type:"onTrackDataLoaded",playerObj:c,url:s})})};u=n,P.push(c),l(o[r])},_=function(e,n){return n?'<div class="sc-loading-artwork">Loading Artwork</div>':e.artwork_url?'<img src="'+e.artwork_url.replace("-large","-t500x500")+'"/>':'<div class="sc-no-artwork">No Artwork</div>'},T=function(e,t){d(".sc-info",e).each(function(e){d("h3",this).html('<a href="'+t.permalink_url+'">'+t.title+"</a>"),d("h4",this).html('by <a href="'+t.user.permalink_url+'">'+t.user.username+"</a>"),d("p",this).html(t.description||"no Description")}),d(".sc-artwork-list li",e).each(function(e){var n=d(this);n.data("sc-track")===t?n.addClass("active").find(".sc-loading-artwork").each(function(e){d(this).removeClass("sc-loading-artwork").html(_(t,!1))}):n.removeClass("active")}),d(".sc-duration",e).html(f(t.duration)),d(".sc-waveform-container",e).html('<img src="'+t.waveform_url+'" />'),e.trigger("onPlayerTrackSwitch.scPlayer",[t])},M=function(e,n){n&&d("div.sc-player.playing").removeClass("playing"),d(e).toggleClass("playing",n).trigger(n?"onPlayerPlay":"onPlayerPause")},C=function(e,n){var t,a,i,s=(t=e,P[d(t).data("sc-player").id]).tracks[n||0];T(e,s),w={$buffer:d(".sc-buffer",e),$played:d(".sc-played",e),position:d(".sc-position",e)[0]},M(e,!0),i=(a=s).permalink_url,l===i?m.play():(l=i,m.load(a,u))},E=function(){var e=80,n=document.cookie.split(";"),t=new RegExp("scPlayer_volume=(\\d+)");for(var a in n)if(t.test(n[a])){e=parseInt(n[a].match(t)[1],10);break}return e}(),D=function(e){var n=Math.floor(e),t=new Date;t.setTime(t.getTime()+31536e6),E=n,document.cookie=["scPlayer_volume=",n,"; expires=",t.toUTCString(),'; path="/"'].join(""),m.setVolume(E)};h.bind("scPlayer:onAudioReady",function(e){y("onPlayerReady: audio engine is ready"),m.play(),D(E)}).bind("scPlayer:onMediaPlay",function(e){clearInterval(p),p=setInterval(function(){var e=m.getDuration(),n=m.getPosition(),t=n/e;w.$played.css("width",100*t+"%"),w.position.innerHTML=f(n),h.trigger({type:"onMediaTimeUpdate.scPlayer",duration:e,position:n,relative:t})},500)}).bind("scPlayer:onMediaPause",function(e){clearInterval(p),p=null}).bind("scPlayer:onVolumeChange",function(e){D(e.volume)}).bind("scPlayer:onMediaEnd",function(e){var n;n=w.$played.closest(".sc-player"),w.$played.css("width","0%"),w.position.innerHTML=f(0),M(n,!1),m.stop(),n.trigger("onPlayerTrackFinish")}).bind("scPlayer:onMediaBuffering",function(e){w.$buffer.css("width",e.percent+"%")}),d.scPlayer=function(e,n){var a=d.extend({},d.scPlayer.defaults,e),t=P.length,i=n&&d(n),s=i[0].className.replace("sc-player",""),o=a.links||d.map(d("a",i).add(i.filter("a")),function(e){return{url:e.href,title:e.innerHTML}}),r=d('<div class="sc-player loading"></div>').data("sc-player",{id:t}),c=d('<ol class="sc-artwork-list"></ol>').appendTo(r),l=(d('<div class="sc-info"><h3></h3><h4></h4><p></p><a href="#" class="sc-info-close">X</a></div>').appendTo(r),d('<div class="sc-controls"></div>').appendTo(r),d('<ol class="sc-trackslist"></ol>').appendTo(r));return(s||a.customClass)&&r.addClass(s).addClass(a.customClass),r.find(".sc-controls").append('<a href="#play" class="sc-play">Play</a> <a href="#pause" class="sc-pause hidden">Pause</a>').end().append('<a href="#info" class="sc-info-toggle">Info</a>').append('<div class="sc-scrubber"></div>').find(".sc-scrubber").append('<div class="sc-volume-slider"><span class="sc-volume-status" style="width:'+E+'%"></span></div>').append('<div class="sc-time-span"><div class="sc-waveform-container"></div><div class="sc-buffer"></div><div class="sc-played"></div></div>').append('<div class="sc-time-indicators"><span class="sc-position"></span> | <span class="sc-duration"></span></div>'),b(r,o,a.apiKey),r.bind("onTrackDataLoaded.scPlayer",function(e){var n,t=e.playerObj.tracks;a.randomize&&((n=t).sort(function(){return 1-Math.floor(3*Math.random())}),t=n),d.each(t,function(e,n){var t=0===e;d('<li><a href="'+n.permalink_url+'">'+n.title+'</a><span class="sc-track-duration">'+f(n.duration)+"</span></li>").data("sc-track",{id:e}).toggleClass("active",t).appendTo(l),d("<li></li>").append(_(n,e>=a.loadArtworks)).appendTo(c).toggleClass("active",t).data("sc-track",n)}),r.each(function(){d.isFunction(a.beforeRender)&&a.beforeRender.call(this,t)}),d(".sc-duration",r)[0].innerHTML=f(t[0].duration),d(".sc-position",r)[0].innerHTML=f(0),T(r,t[0]),a.continuePlayback&&r.bind("onPlayerTrackFinish",function(e){var n;n=d(r),y("track finished get the next one"),$nextItem=d(".sc-trackslist li.active",n).next("li"),$nextItem.length||($nextItem=n.nextAll("div.sc-player:first").find(".sc-trackslist li.active")),$nextItem.click()}),r.removeClass("loading").trigger("onPlayerInit"),a.autoPlay&&!k&&(C(r),k=!0)}),i.each(function(e){d(this).replaceWith(r)}),r},d.scPlayer.stopAll=function(){d(".sc-player.playing a.sc-pause").click()},d.scPlayer.destroy=function(){d(".sc-player, .sc-player-engine-container").remove()},d.fn.scPlayer=function(e){return k=!1,this.each(function(){d.scPlayer(e,this)}),this},d.scPlayer.defaults=d.fn.scPlayer.defaults={customClass:null,beforeRender:function(e){d(this)},onDomReady:function(){d("a.sc-player, div.sc-player").scPlayer()},autoPlay:!1,continuePlayback:!0,randomize:!1,loadArtworks:5,apiKey:"htuiRd1JP11Ww0X72T1C3g"},d(document).on("click","a.sc-play, a.sc-pause",function(e){return d(this).closest(".sc-player").find("ol.sc-trackslist").find("li.active").click(),!1}),d(document).on("click","a.sc-info-toggle, a.sc-info-close",function(e){return d(this).closest(".sc-player").find(".sc-info").toggleClass("active").end().find("a.sc-info-toggle").toggleClass("active"),!1}),d(document).on("click",".sc-trackslist li",function(e){var n=d(this),t=n.closest(".sc-player"),a=n.data("sc-track").id;return t.is(":not(.playing)")||n.is(":not(.active)")?C(t,a):(M(t,!1),m.pause()),n.addClass("active").siblings("li").removeClass("active"),d(".artworks li",t).each(function(e){d(this).toggleClass("active",e===a)}),!1});var L=function(e,n){var t,a,i=d(e).closest(".sc-time-span"),s=i.find(".sc-buffer"),o=i.find(".sc-waveform-container img"),r=i.closest(".sc-player"),c=Math.min(s.width(),n-o.offset().left)/o.width();t=r,a=c,m.seek(a),d(t).trigger("onPlayerSeek"),M(t,!0)},$=function(e){1===e.targetTouches.length&&(L(e.target,e.targetTouches&&e.targetTouches.length&&e.targetTouches[0].clientX),e.preventDefault())};d(document).on("click",".sc-time-span",function(e){return L(this,e.pageX),!1}).on("touchstart",".sc-time-span",function(e){this.addEventListener("touchmove",$,!1),e.originalEvent.preventDefault()}).on("touchend",".sc-time-span",function(e){this.removeEventListener("touchmove",$,!1),e.originalEvent.preventDefault()});var j=function(e,n){var t=d(e),a=t.offset().left,i=t.width(),s=function(e){var n;h.trigger({type:"scPlayer:onVolumeChange",volume:(n=e.pageX,Math.floor((n-a)/i*100))})};t.bind("mousemove.sc-player",s),s(n)};d(document).on("mousedown",".sc-volume-slider",function(e){j(this,e)}).on("mouseup",".sc-volume-slider",function(e){d(this).unbind("mousemove.sc-player")}),h.bind("scPlayer:onVolumeChange",function(e){d("span.sc-volume-status").css({width:e.volume+"%"})}),d(function(){d.isFunction(d.scPlayer.defaults.onDomReady)&&d.scPlayer.defaults.onDomReady()})}(jQuery),function(){var n=jQuery.fn.addClass;$.fn.addClass=function(){var e=n.apply(this,arguments);return $(this).trigger("classChanged"),e}}(),$(function(){$("div.sc-player").bind("classChanged",function(){if($(this).hasClass("playing")){var e='<img class="rounded ae-3" src="'+$("div.sc-player.playing ol.sc-artwork-list li.active img").attr("src")+'" alt="Image Thumbnail" data-action="zoom"/>';$(this).parent().parent().parent().children(".image-96").html(e)}})});
